\documentclass[12pt,a4paper]{report}

% ─── Pacchetti ───────────────────────────────────────────────────────────────
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[provide=*,italian]{babel}
\usepackage{geometry}
\usepackage{makecell}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{tabularx}
\usepackage{enumitem}
\usepackage{listings}
\usepackage{tcolorbox}
\usepackage{parskip}
\usepackage{amsmath}
\usepackage{setspace}
\usepackage{titletoc}
\usepackage{caption}
\usepackage{float}
\usepackage{multirow}

% ─── Geometria pagina ────────────────────────────────────────────────────────
\geometry{
  a4paper,
  top=2.5cm,
  bottom=2.5cm,
  left=2.5cm,
  right=2.5cm,
  headheight=15pt
}

% ─── Colori ──────────────────────────────────────────────────────────────────
\definecolor{dimblue}{RGB}{0, 51, 102}
\definecolor{dimlightblue}{RGB}{70, 130, 180}
\definecolor{dimgray}{RGB}{80, 80, 80}
\definecolor{dimboxbg}{RGB}{240, 245, 250}
\definecolor{dimboxborder}{RGB}{0, 51, 102}
\definecolor{codebackground}{RGB}{245, 245, 245}
\definecolor{codeborder}{RGB}{200, 200, 200}
\definecolor{warningbg}{RGB}{255, 248, 230}
\definecolor{warningborder}{RGB}{200, 150, 50}

% ─── Hyperref ────────────────────────────────────────────────────────────────
\hypersetup{
  colorlinks=true,
  linkcolor=dimblue,
  urlcolor=dimlightblue,
  citecolor=dimblue,
  pdftitle={Domain Interviewer \& Modeler - Documentazione Tecnica},
  pdfauthor={Luca Scorza}
}

% ─── Intestazioni capitoli ───────────────────────────────────────────────────
\titleformat{\chapter}[display]
  {\normalfont\Large\bfseries\color{dimblue}}
  {\chaptertitlename\ \thechapter}
  {10pt}
  {\huge}

\titleformat{\section}
  {\normalfont\large\bfseries\color{dimblue}}
  {\thesection}
  {1em}
  {}

\titleformat{\subsection}
  {\normalfont\normalsize\bfseries\color{dimgray}}
  {\thesubsection}
  {1em}
  {}

\titleformat{\subsubsection}
  {\normalfont\small\bfseries\color{dimgray}}
  {\thesubsubsection}
  {1em}
  {}

\titlespacing*{\chapter}{0pt}{-20pt}{20pt}
\titlespacing*{\section}{0pt}{12pt}{6pt}
\titlespacing*{\subsection}{0pt}{8pt}{4pt}
\titlespacing*{\subsubsection}{0pt}{6pt}{3pt}

% ─── Intestazione e piè di pagina ────────────────────────────────────────────
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\small\color{dimgray}\textit{Domain Interviewer \& Modeler}}
\fancyhead[R]{\small\color{dimgray}\textit{Documentazione Tecnica}}
\fancyfoot[C]{\small\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}

% ─── Stile box tecnico ───────────────────────────────────────────────────────
\tcbuselibrary{breakable, skins}

\newenvironment{technicalbox}[1]{%
  \begin{tcolorbox}[
    title={\strut #1},
    breakable,
    enhanced,
    colback=dimboxbg,
    colframe=dimboxborder,
    colbacktitle=dimboxborder,
    coltitle=white,
    fonttitle=\bfseries\small,
    boxrule=0.8pt,
    arc=3pt,
    left=6pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    before upper={\parskip=4pt},
  ]
}{%
  \end{tcolorbox}
}

\newenvironment{warningbox}[1]{%
  \begin{tcolorbox}[
    title={\strut #1},
    breakable,
    enhanced,
    colback=warningbg,
    colframe=warningborder,
    colbacktitle=warningborder,
    coltitle=white,
    fonttitle=\bfseries\small,
    boxrule=0.8pt,
    arc=3pt,
    left=6pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    before upper={\parskip=4pt},
  ]
}{%
  \end{tcolorbox}
}

% ─── Stile codice ────────────────────────────────────────────────────────────
\lstdefinestyle{dimcode}{
  backgroundcolor=\color{codebackground},
  frame=single,
  framerule=0.4pt,
  rulecolor=\color{codeborder},
  basicstyle=\ttfamily\small,
  breaklines=true,
  breakatwhitespace=false,
  keepspaces=true,
  showstringspaces=false,
  tabsize=2,
  xleftmargin=10pt,
  xrightmargin=10pt,
  aboveskip=8pt,
  belowskip=8pt,
}
\lstset{style=dimcode}

% ─── Stile liste ─────────────────────────────────────────────────────────────
\setlist[itemize]{leftmargin=1.5em, itemsep=2pt, topsep=4pt}
\setlist[enumerate]{leftmargin=1.5em, itemsep=2pt, topsep=4pt}

% ─── Interlinea ──────────────────────────────────────────────────────────────
\setlength{\parskip}{6pt}
\setlength{\parindent}{0pt}

% ─── Indice personalizzato ───────────────────────────────────────────────────
\titlecontents{chapter}[0em]
  {\vspace{6pt}\bfseries}
  {\thecontentslabel\quad}
  {}
  {\titlerule*[0.5pc]{.}\contentspage}

\titlecontents{section}[1.5em]
  {\small}
  {\thecontentslabel\quad}
  {}
  {\titlerule*[0.5pc]{.}\contentspage}

\titlecontents{subsection}[3em]
  {\small}
  {\thecontentslabel\quad}
  {}
  {\titlerule*[0.5pc]{.}\contentspage}

% ─── Tabelle ─────────────────────────────────────────────────────────────────
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}}

\captionsetup[table]{
  labelfont={bf,color=dimblue},
  textfont=small,
  position=below,
  skip=4pt
}

\captionsetup[figure]{
  labelfont={bf,color=dimblue},
  textfont=small,
  position=below,
  skip=4pt
}

% ─────────────────────────────────────────────────────────────────────────────
%  DOCUMENTO
% ─────────────────────────────────────────────────────────────────────────────
\begin{document}

% ── FRONTESPIZIO ─────────────────────────────────────────────────────────────
\begin{titlepage}
  \centering
  \vspace*{1.5cm}

  {\Large\bfseries Università Campus Bio-Medico di Roma\par}
  \vspace{0.4cm}
  {\large Facoltà di Ingegneria\par}
  \vspace{0.2cm}
  {\large Corso di Laurea in Ingegneria dei Sistemi Intelligenti\par}

  \vspace{1.2cm}
  {\normalsize Progetto per l'insegnamento di\par}
  \vspace{0.3cm}
  {\large\bfseries Intelligent Architectures: Microservices Programming for AI\par}

  \vspace{2cm}
  \color{dimblue}\rule{\textwidth}{1.5pt}\par
  \vspace{0.5cm}
  {\Huge\bfseries Domain Interviewer \& Modeler\par}
  \vspace{0.4cm}
  {\large Agente~1 di una pipeline multi-agente per la scoperta del dominio\\e la progettazione automatica di architetture a microservizi\\tramite AI locale e workflow orchestrati\par}
  \vspace{0.5cm}
  \color{dimblue}\rule{\textwidth}{1.5pt}\par

  \vspace{2.5cm}
  \color{black}
  \begin{minipage}{0.45\textwidth}
    \raggedright
    {\bfseries Studenti:}\\[4pt]
    Gianluca Barnaba \\
    Luca Scorza \\
    Federico Principi
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
    \raggedleft
    {\bfseries Docenti:}\\[4pt]
    Prof. Floriano Caprio \\
    Prof. Paolo Soda\\
    Prof. Ermanno Cordelli\\
    Prof. Giordano Pescetelli
  \end{minipage}

  \vfill
  {\large Anno Accademico 2025/2026\par}
\end{titlepage}

% ── INDICE ───────────────────────────────────────────────────────────────────
\tableofcontents
\thispagestyle{fancy}

\listoffigures
\thispagestyle{fancy}

\listoftables
\thispagestyle{fancy}

% ── CAPITOLI ─────────────────────────────────────────────────────────────────
\input{chapters/01_executive_summary}
\input{chapters/02_analisi_scenario}
\input{chapters/03_obiettivi_requisiti}
\input{chapters/04_stakeholder_ruoli}
\input{chapters/05_architettura}
\input{chapters/06_deployment_docker}
\input{chapters/07_workflow_n8n}
\input{chapters/08_frontend}
\input{chapters/09_system_prompts}
\input{chapters/10_osservabilita}
\input{chapters/11_problemi_soluzioni}
\input{chapters/12_conclusioni}
\input{chapters/13_caso_studio}

\end{document}
